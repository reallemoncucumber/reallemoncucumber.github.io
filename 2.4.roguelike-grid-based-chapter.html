<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Chapter 2.4 - Mastering Roguelike Game Design: From Permadeath to Procedural Generation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="0.roguelike-game-design-book-toc.html">Chapter 0</a></li><li class="chapter-item expanded affix "><a href="1.1.roguelike-definition-chapter.html">Chapter 1.1</a></li><li class="chapter-item expanded affix "><a href="1.2.roguelike-history-chapter.html">Chapter 1.2</a></li><li class="chapter-item expanded affix "><a href="1.3.roguelike-key-elements-chapter.html">Chapter 1.3</a></li><li class="chapter-item expanded affix "><a href="2.1.roguelike-permadeath-chapter.html">Chapter 2.1</a></li><li class="chapter-item expanded affix "><a href="2.2.roguelike-procedural-generation-chapter.html">Chapter 2.2</a></li><li class="chapter-item expanded affix "><a href="2.3.roguelike-turn-based-gameplay-chapter.html">Chapter 2.3</a></li><li class="chapter-item expanded affix "><a href="2.4.roguelike-grid-based-chapter.html" class="active">Chapter 2.4</a></li><li class="chapter-item expanded affix "><a href="2.5.roguelike-resource-management.html">Chapter 2.5</a></li><li class="chapter-item expanded affix "><a href="3.1.algorithms-for-dungeon-generation.html">Chapter 3.1</a></li><li class="chapter-item expanded affix "><a href="3.2.creating-balanced-and-interesting-levels.html">Chapter 3.2</a></li><li class="chapter-item expanded affix "><a href="3.3.generating-items-enemies-quests.html">Chapter 3.3</a></li><li class="chapter-item expanded affix "><a href="3.4.ensuring-fairness-in-randomized-content.html">Chapter 3.4</a></li><li class="chapter-item expanded affix "><a href="4.1.designing-character-classes-and-races.html">Chapter 4.1</a></li><li class="chapter-item expanded affix "><a href="4.2.expecience-points-and-leveling-mechanisms.html">Chapter 4.2</a></li><li class="chapter-item expanded affix "><a href="4.3.skill-trees-and-ability-unlocks.html">Chapter 4.3</a></li><li class="chapter-item expanded affix "><a href="4.4.balancing-character-growth-and-game-difficulty.html">Chapter 4.4</a></li><li class="chapter-item expanded affix "><a href="5.1.turn-based-combat-systems.html">Chapter 5.1</a></li><li class="chapter-item expanded affix "><a href="5.2.designing-diverse-and-challenging-enemies.html">Chapter 5.2</a></li><li class="chapter-item expanded affix "><a href="5.3.boss-fights-and-special-encounters.html">Chapter 5.3</a></li><li class="chapter-item expanded affix "><a href="5.4.balancing-combat-difficulty-and-player-skill.html">Chapter 5.4</a></li><li class="chapter-item expanded affix "><a href="6.1.roguelike-item-design-chapter.html">Chapter 6.1</a></li><li class="chapter-item expanded affix "><a href="6.2.roguelike-crafting-systems-chapter.html">Chapter 6.2</a></li><li class="chapter-item expanded affix "><a href="6.3.roguelike-currency-shop-mechanics-chapter.html">Chapter 6.3</a></li><li class="chapter-item expanded affix "><a href="6.4.roguelike-inventory-identification-chapter.html">Chapter 6.4</a></li><li class="chapter-item expanded affix "><a href="7.1.roguelike-story-gameplay-balance.html">Chapter 7.1</a></li><li class="chapter-item expanded affix "><a href="7.2.roguelike-environmental-storytelling.html">Chapter 7.2</a></li><li class="chapter-item expanded affix "><a href="7.3.roguelike-quests-chapter.html">Chapter 7.3</a></li><li class="chapter-item expanded affix "><a href="7.4.roguelike-lore-chapter.html">Chapter 7.4</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mastering Roguelike Game Design: From Permadeath to Procedural Generation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="24-grid-based-movement-and-combat"><a class="header" href="#24-grid-based-movement-and-combat">2.4 Grid-Based Movement and Combat</a></h1>
<p>Grid-based systems are a hallmark of traditional roguelikes, providing a clear and structured framework for movement, positioning, and combat. This chapter explores the implementation and implications of grid-based mechanics in roguelike game design.</p>
<h2 id="understanding-grid-based-systems"><a class="header" href="#understanding-grid-based-systems">Understanding Grid-Based Systems</a></h2>
<p>In a grid-based roguelike, the game world is divided into discrete cells, typically represented as squares or hexagons. Each cell can contain entities such as the player, enemies, items, or terrain features.</p>
<h3 id="key-characteristics"><a class="header" href="#key-characteristics">Key Characteristics:</a></h3>
<ol>
<li><strong>Discrete Positions</strong>: Entities occupy specific grid cells rather than continuous coordinates.</li>
<li><strong>Defined Distances</strong>: Movement and range are measured in grid units.</li>
<li><strong>Clear Line of Sight</strong>: Simplified calculations for visibility and projectiles.</li>
<li><strong>Tactical Positioning</strong>: Emphasizes the importance of spatial relationships.</li>
</ol>
<h2 id="designing-grid-based-movement"><a class="header" href="#designing-grid-based-movement">Designing Grid-Based Movement</a></h2>
<h3 id="1-movement-types"><a class="header" href="#1-movement-types">1. Movement Types</a></h3>
<ul>
<li><strong>Cardinal</strong>: Four directions (up, down, left, right)</li>
<li><strong>Ordinal</strong>: Eight directions (including diagonals)</li>
<li><strong>Hexagonal</strong>: Six directions (for hex-based grids)</li>
</ul>
<h3 id="2-movement-costs"><a class="header" href="#2-movement-costs">2. Movement Costs</a></h3>
<ul>
<li>Assign different movement costs to various terrain types.</li>
<li>Consider diagonal movement costs (often 1.4x straight movement).</li>
</ul>
<h3 id="3-collision-and-occupation"><a class="header" href="#3-collision-and-occupation">3. Collision and Occupation</a></h3>
<ul>
<li>Define rules for which entities can occupy the same cell.</li>
<li>Implement push mechanics for moving obstacles or other entities.</li>
</ul>
<h3 id="4-pathfinding"><a class="header" href="#4-pathfinding">4. Pathfinding</a></h3>
<ul>
<li>Implement algorithms like A* for enemy movement and player auto-travel.</li>
<li>Consider performance optimizations for large maps or many entities.</li>
</ul>
<h2 id="grid-based-combat-systems"><a class="header" href="#grid-based-combat-systems">Grid-Based Combat Systems</a></h2>
<h3 id="1-melee-combat"><a class="header" href="#1-melee-combat">1. Melee Combat</a></h3>
<ul>
<li>Define attack ranges (usually adjacent cells).</li>
<li>Implement facing directions for backstab mechanics or shield blocking.</li>
</ul>
<h3 id="2-ranged-combat"><a class="header" href="#2-ranged-combat">2. Ranged Combat</a></h3>
<ul>
<li>Calculate line of sight using grid-based algorithms.</li>
<li>Define range in grid units and implement range penalties.</li>
</ul>
<h3 id="3-area-of-effect-aoe-abilities"><a class="header" href="#3-area-of-effect-aoe-abilities">3. Area of Effect (AoE) Abilities</a></h3>
<ul>
<li>Design AoE patterns based on grid cells (e.g., 3x3 square, cross shape).</li>
<li>Consider partial effects for abilities that only partially cover a cell.</li>
</ul>
<h3 id="4-cover-and-terrain-interaction"><a class="header" href="#4-cover-and-terrain-interaction">4. Cover and Terrain Interaction</a></h3>
<ul>
<li>Implement cover systems using grid cells (full cover, partial cover).</li>
<li>Design destructible terrain that changes grid properties when damaged.</li>
</ul>
<h2 id="advanced-grid-based-concepts"><a class="header" href="#advanced-grid-based-concepts">Advanced Grid-Based Concepts</a></h2>
<h3 id="1-multi-level-grids"><a class="header" href="#1-multi-level-grids">1. Multi-Level Grids</a></h3>
<ul>
<li>Implement staircases, ladders, or portals for level transitions.</li>
<li>Consider flying or burrowing mechanics that interact with multiple grid layers.</li>
</ul>
<h3 id="2-dynamic-grids"><a class="header" href="#2-dynamic-grids">2. Dynamic Grids</a></h3>
<ul>
<li>Design systems for changing grid properties (e.g., flooding, burning).</li>
<li>Implement pushing or pulling mechanics that rearrange grid contents.</li>
</ul>
<h3 id="3-non-euclidean-grids"><a class="header" href="#3-non-euclidean-grids">3. Non-Euclidean Grids</a></h3>
<ul>
<li>Experiment with wrapping grids for planetary surfaces or bizarre dungeons.</li>
<li>Implement portals that connect non-adjacent grid cells.</li>
</ul>
<h3 id="4-hybrid-systems"><a class="header" href="#4-hybrid-systems">4. Hybrid Systems</a></h3>
<ul>
<li>Combine grid-based movement with continuous aiming for ranged attacks.</li>
<li>Use sub-grid positioning for smoother animations or more precise mechanics.</li>
</ul>
<h2 id="balancing-grid-based-gameplay"><a class="header" href="#balancing-grid-based-gameplay">Balancing Grid-Based Gameplay</a></h2>
<h3 id="1-spatial-puzzle-design"><a class="header" href="#1-spatial-puzzle-design">1. Spatial Puzzle Design</a></h3>
<ul>
<li>Create interesting tactical scenarios using terrain and enemy placement.</li>
<li>Design levels that encourage creative use of movement and positioning.</li>
</ul>
<h3 id="2-ability-design"><a class="header" href="#2-ability-design">2. Ability Design</a></h3>
<ul>
<li>Balance ability ranges and areas of effect with grid size and map layout.</li>
<li>Consider how grid-based limitations affect ability usefulness.</li>
</ul>
<h3 id="3-enemy-ai"><a class="header" href="#3-enemy-ai">3. Enemy AI</a></h3>
<ul>
<li>Develop AI that can effectively navigate and utilize the grid.</li>
<li>Create enemies with varied movement patterns (e.g., chess-piece-like moves).</li>
</ul>
<h3 id="4-progression-and-upgrades"><a class="header" href="#4-progression-and-upgrades">4. Progression and Upgrades</a></h3>
<ul>
<li>Design upgrades that interact with grid mechanics (e.g., increased movement range, phasing through walls).</li>
</ul>
<h2 id="technical-implementation"><a class="header" href="#technical-implementation">Technical Implementation</a></h2>
<h3 id="1-data-structures"><a class="header" href="#1-data-structures">1. Data Structures</a></h3>
<ul>
<li>Choose appropriate data structures for representing the grid (2D arrays, chunk systems for large worlds).</li>
<li>Implement efficient systems for querying grid contents and properties.</li>
</ul>
<h3 id="2-coordinate-systems"><a class="header" href="#2-coordinate-systems">2. Coordinate Systems</a></h3>
<ul>
<li>Develop a clear system for translating between grid coordinates and screen positions.</li>
<li>Consider using cube coordinates for hexagonal grids.</li>
</ul>
<h3 id="3-rendering"><a class="header" href="#3-rendering">3. Rendering</a></h3>
<ul>
<li>Implement efficient rendering systems that can handle large grid-based worlds.</li>
<li>Develop tile-based graphics systems that align with the grid.</li>
</ul>
<h3 id="4-input-handling"><a class="header" href="#4-input-handling">4. Input Handling</a></h3>
<ul>
<li>Design intuitive input systems for grid-based movement (keyboard, mouse, controller).</li>
<li>Implement path preview systems for multi-step movements.</li>
</ul>
<h2 id="visuals-and-feedback"><a class="header" href="#visuals-and-feedback">Visuals and Feedback</a></h2>
<h3 id="1-grid-visibility"><a class="header" href="#1-grid-visibility">1. Grid Visibility</a></h3>
<ul>
<li>Decide whether to display grid lines or keep them invisible.</li>
<li>Use subtle visual cues to reinforce grid structure without being obtrusive.</li>
</ul>
<h3 id="2-movement-animation"><a class="header" href="#2-movement-animation">2. Movement Animation</a></h3>
<ul>
<li>Implement smooth animations for grid-to-grid movement.</li>
<li>Consider "bump" animations for failed movement attempts.</li>
</ul>
<h3 id="3-range-indicators"><a class="header" href="#3-range-indicators">3. Range Indicators</a></h3>
<ul>
<li>Develop clear visual systems for showing movement ranges, attack ranges, and areas of effect.</li>
<li>Use highlighting or overlays to indicate valid target cells.</li>
</ul>
<h2 id="case-studies"><a class="header" href="#case-studies">Case Studies</a></h2>
<ol>
<li><strong>"Hoplite"</strong>: Uses a hexagonal grid to create unique tactical scenarios.</li>
<li><strong>"Crypt of the NecroDancer"</strong>: Combines grid-based movement with rhythm game mechanics.</li>
<li><strong>"Into the Breach"</strong>: Utilizes a small grid to create tight, puzzle-like combat scenarios.</li>
</ol>
<h2 id="challenges-and-considerations"><a class="header" href="#challenges-and-considerations">Challenges and Considerations</a></h2>
<ol>
<li><strong>Spatial Clarity</strong>: Ensure that grid relationships and distances are clear to the player.</li>
<li><strong>Performance</strong>: Optimize grid-based calculations for large maps or complex scenarios.</li>
<li><strong>Design Limitations</strong>: Work creatively within the constraints of grid-based systems.</li>
<li><strong>Accessibility</strong>: Consider options for players who may struggle with spatial reasoning.</li>
</ol>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Grid-based movement and combat are fundamental to the roguelike experience, providing a clear framework for tactical decision-making and spatial reasoning. When implemented thoughtfully, grid systems can create deep, engaging gameplay that is easy to understand but difficult to master.</p>
<p>As you develop your roguelike, consider how grid-based mechanics can enhance your core gameplay loop and create unique strategic scenarios. Whether you stick to traditional square grids or experiment with hexagons or hybrid systems, the key is to create a consistent, intuitive system that supports engaging gameplay.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2.3.roguelike-turn-based-gameplay-chapter.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="2.5.roguelike-resource-management.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2.3.roguelike-turn-based-gameplay-chapter.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="2.5.roguelike-resource-management.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
